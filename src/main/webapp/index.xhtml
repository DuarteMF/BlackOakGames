<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<h:outputStylesheet library="css" name="bootstrap.css"></h:outputStylesheet>
	<h:outputStylesheet library="css" name="mystyle.css"></h:outputStylesheet>


</h:head>
<h:body>
	<header>
		<h1>Black Oak Games</h1>
	</header>
	<p:growl id="errorMsgs" showDetail="true" />
	<h:form id="PlatformTable">
		<p:growl id="platformTableMsgs" showDetail="true" />
		<p:dataTable id="PlatformList" var="platform"
			value="#{PlatformBean.getList()}">
			<f:facet name="header">	Platforms </f:facet>

			<p:column headerText="Id">
				<h:outputText value="#{platform.platformId}" />
			</p:column>
			<p:column headerText="Name">
				<h:outputText value="#{platform.platformName}" />
			</p:column>
			<p:column headerText="Games">
				<h:outputText value="#{platform.productSet}" />
			</p:column>
			<p:column headerText="Opções">
				<p:commandButton update=":EditPlatformSection" icon="ui-icon-pencil"
					title="Edit">
					<f:setPropertyActionListener value="#{platform}"
						target="#{PlatformBean.editedPlatform}" />
				</p:commandButton>
				<p:commandButton update=":PlatformTable:PlatformList"
					action="#{PlatformBean.deletePlatform(platform)}"
					icon="ui-icon-trash" title="Delete" />
			</p:column>
		</p:dataTable>
	</h:form>

	<h:form id="AddPlatformSection">
		<p:growl id="platformAddMsgs" showDetail="true" />
		<h:panelGrid columns="3" cellpadding="5">
			<p:outputLabel value="Nome:" for="addPlatformName" />
			<p:inputText id="addPlatformName" placeholder="Insert Platform"
				value="#{PlatformBean.newPlatform.platformName}" />
			<p:commandButton value="Adicionar"
				update=":PlatformTable:PlatformList"
				action="#{PlatformBean.addPlatform()}" />
		</h:panelGrid>
	</h:form>

	<h:form id="EditPlatformSection">
		<p:growl id="platformEditMsgs" showDetail="true" />
		<h:inputHidden value="#{PlatformBean.editedPlatform.platformId}" />
		<h:panelGrid columns="3" cellpadding="5">
			<p:outputLabel value="Nome:" for="editPlatformName" />
			<p:inputText id="editPlatformName" placeholder="Insert Platform"
				value="#{PlatformBean.editedPlatform.platformName}" />
			<p:commandButton value="Editar" update=":PlatformTable:PlatformList"
				action="#{PlatformBean.editPlatform()}" />
		</h:panelGrid>
	</h:form>

	<h:form id="CategoryTable">
		<p:dataTable id="CategoryList" var="category"
			value="#{CategoryBean.getList()}">
			<f:facet name="header">	Categories </f:facet>
			<p:column headerText="Id">
				<h:outputText value="#{category.categoryId}" />
			</p:column>
			<p:column headerText="Name">
				<h:outputText value="#{category.categoryName}" />
			</p:column>
			<p:column headerText="Games">
				<h:outputText value="#{category.productSet}" />
			</p:column>
			<p:column headerText="Opções">
				<p:commandButton update=":EditCategorySection" icon="ui-icon-pencil"
					title="Edit">
					<f:setPropertyActionListener value="#{category}"
						target="#{CategoryBean.editedCategory}" />
				</p:commandButton>
				<p:commandButton update=":CategoryTable:CategoryList"
					action="#{CategoryBean.deleteCategory(category)}"
					icon="ui-icon-trash" title="Delete" />
			</p:column>
		</p:dataTable>
	</h:form>

	<h:form id="AddCategorySection">
		<p:growl id="categoryAddMsgs" showDetail="true" />
		<h:panelGrid columns="3" cellpadding="5">
			<p:outputLabel value="Nome:" for="addCategoryName" />
			<p:inputText id="addCategoryName" placeholder="Insert Category"
				value="#{CategoryBean.newCategory.categoryName}" />
			<p:commandButton value="Adicionar"
				update=":CategoryTable:CategoryList"
				action="#{CategoryBean.addCategory()}" />
		</h:panelGrid>
	</h:form>

	<h:form id="EditCategorySection">
		<p:growl id="categoryEditMsgs" showDetail="true" />
		<h:inputHidden value="#{CategoryBean.editedCategory.categoryId}" />
		<h:panelGrid columns="3" cellpadding="5">
			<p:outputLabel value="Nome:" for="editCategoryName" />
			<p:inputText id="editCategoryName" placeholder="Insert Category"
				value="#{CategoryBean.editedCategory.categoryName}" />
			<p:commandButton value="Editar" update=":CategoryTable:CategoryList"
				action="#{CategoryBean.editCategory()}" />
		</h:panelGrid>
	</h:form>

	<h:form id="ProductTable">
		<p:growl id="productTableMsgs" showDetail="true" />
		<p:dataTable id="ProductList" var="product"
			value="#{ProductBean.getList()}">
			<f:facet name="header">	Products </f:facet>

			<p:column headerText="Id">
				<h:outputText value="#{product.productId}" />
			</p:column>
			<p:column headerText="Name">
				<h:outputText value="#{product.productName}" />
			</p:column>
			<p:column headerText="Year">
				<h:outputText value="#{product.year}" />
			</p:column>
			<p:column headerText="Categories">
				<h:outputText value="#{product.categorySet}" />
			</p:column>
			<p:column headerText="Platforms">
				<h:outputText value="#{product.platformSet}" />
			</p:column>
			<p:column headerText="Publisher">
				<h:outputText value="#{product.publisher}" />
			</p:column>
			<p:column headerText="Details">
				<h:outputText value="#{product.details}" />
			</p:column>
			<p:column headerText="Rental Price (€ per week)">
				<h:outputText value="#{product.rentalPrice}" />
			</p:column>
			<p:column headerText="Availability">
				<h:outputText value="#{product.availability}" />
			</p:column>
			<p:column headerText="Opções">
				<p:commandButton update=":EditProductSection, :errorMsgs"
					icon="ui-icon-pencil" title="Edit">
					<f:setPropertyActionListener value="#{product}"
						target="#{ProductBean.editedProduct}" />
				</p:commandButton>
				<p:commandButton update=":ProductTable:ProductList"
					action="#{ProductBean.deleteProduct(product)}" icon="ui-icon-trash"
					title="Delete" />
			</p:column>
		</p:dataTable>
	</h:form>
	<div class="row" id="teste">
		<div class="col-xs-6">
			<h:form id="AddProductSection">
				<p:growl id="productAddMsgs" showDetail="true" />
				<h:panelGrid columns="2" cellpadding="5">

					<p:outputLabel value="Nome:" for="addProductName" />
					<p:inputText id="addProductName"
						value="#{ProductBean.newProduct.productName}"
						placeholder="Insert Product" />

					<h:outputLabel for="addYear" value="Year:" />
					<p:spinner min="1980" max="2018" id="addYear"
						value="#{ProductBean.newProduct.year}" placeholder="1980-2018">
					</p:spinner>

					<p:outputLabel value="Categories:" for="addCategories"
						rendered="#{not empty ProductBean.existingCategories()}" />
					<p:selectCheckboxMenu id="addCategories"
						value="#{ProductBean.categoryNameList}" label="Categories"
						multiple="true"
						rendered="#{not empty ProductBean.existingCategories()}">
						<f:selectItems value="#{ProductBean.existingCategories()}" />
					</p:selectCheckboxMenu>
					<p:outputLabel value="Platforms:" for="addPlatforms"
						rendered="#{not empty ProductBean.existingPlatforms()}" />
					<p:selectCheckboxMenu id="addPlatforms"
						value="#{ProductBean.platformNameList}" label="Platforms"
						multiple="true"
						rendered="#{not empty ProductBean.existingPlatforms()}">
						<f:selectItems value="#{ProductBean.existingPlatforms()}" />
					</p:selectCheckboxMenu>

					<p:outputLabel value="Publisher:" for="addPublisher" />
					<p:inputText id="addPublisher" placeholder="Insert Publisher"
						value="#{ProductBean.newProduct.publisher}" />

					<h:outputLabel for="addRentalPrice"
						value="Rental Price (€ per week):" />
					<p:inputText id="addRentalPrice"
						value="#{ProductBean.newProduct.rentalPrice}"
						placeholder="1.00-35.00"
						converterMessage="Cannot convert to double.">
						<f:validateDoubleRange minimum="1.0" maximum="35.0" />
					</p:inputText>

					<h:outputLabel for="addAvailability" value="Availability 0-99:" />
					<p:spinner min="0" max="99" id="addAvailability"
						value="#{ProductBean.newProduct.availability}" placeholder="00-99">
					</p:spinner>

					<p:outputLabel value="Details:" for="addDetails" />
					<p:inputTextarea maxlength="1000" cols="22" counter="display"
						counterTemplate="{0} characters remaining." id="addDetails"
						placeholder="Insert Details"
						value="#{ProductBean.newProduct.details}" />
					<div></div>
					<h:outputText id="display" />

					<p:commandButton value="Adicionar"
						update=":ProductTable:ProductList,:PlatformTable:PlatformList, :CategoryTable:CategoryList"
						action="#{ProductBean.addProduct()}" />
				</h:panelGrid>
			</h:form>
		</div>
		<div class="col-xs-6">
			<h:form id="EditProductSection">
				<p:growl id="productEditMsgs" showDetail="true" />
				<h:inputHidden value="#{ProductBean.editedProduct.productId}" />
				<h:panelGrid columns="2" cellpadding="5">

					<p:outputLabel value="Nome:" for="editProductName" />
					<p:inputText id="editProductName"
						value="#{ProductBean.editedProduct.productName}"
						placeholder="Insert Product" />

					<h:outputLabel for="editYear" value="Year:" />
					<p:spinner min="1980" max="2018" id="editYear"
						value="#{ProductBean.editedProduct.year}" placeholder="1980-2018">
					</p:spinner>
					
					<p:outputLabel value="Categories:" for="editCategories"
						rendered="#{not empty ProductBean.existingCategories()}" />
					<p:selectCheckboxMenu id="editCategories"
						value="#{ProductBean.categoryNameList}" label="Categories"
						multiple="true"
						rendered="#{not empty ProductBean.existingCategories()}">
						<f:selectItems value="#{ProductBean.existingCategories()}" />
					</p:selectCheckboxMenu>
					<p:outputLabel value="Platforms:" for="editPlatforms"
						rendered="#{not empty ProductBean.existingPlatforms()}" />
					<p:selectCheckboxMenu id="editPlatforms"
						value="#{ProductBean.platformNameList}" label="Platforms"
						multiple="true"
						rendered="#{not empty ProductBean.existingPlatforms()}">
						<f:selectItems value="#{ProductBean.existingPlatforms()}" />
					</p:selectCheckboxMenu>
					<p:outputLabel value="Publisher:" for="editPublisher" />
					<p:inputText id="editPublisher"
						value="#{ProductBean.editedProduct.publisher}" />


					<h:outputLabel for="editRentalPrice"
						value="Rental Price (€ per week):" />
					<p:inputText id="editRentalPrice"
						value="#{ProductBean.editedProduct.rentalPrice}"
						placeholder="1.00-35.00"
						converterMessage="Cannot convert to double.">
						<f:validateDoubleRange minimum="1.0" maximum="35.0" />
					</p:inputText>

					<h:outputLabel for="editAvailability" value="Availability 0-99:" />
					<p:spinner min="0" max="99" id="editAvailability"
						value="#{ProductBean.editedProduct.availability}"
						placeholder="00-99">
					</p:spinner>

					<p:outputLabel value="Details:" for="editDetails" />
					<p:inputTextarea maxlength="1000" cols="22" counter="display"
						counterTemplate="{0} characters remaining." id="editDetails"
						placeholder="Insert Details"
						value="#{ProductBean.editedProduct.details}" />
					<div></div>
					<h:outputText id="display" />

					<p:commandButton value="Editar"
						update=":errorMsgs, :ProductTable:ProductList, :PlatformTable:PlatformList, :CategoryTable:CategoryList"
						action="#{ProductBean.editProduct()}">
					</p:commandButton>
				</h:panelGrid>
			</h:form>
		</div>
	</div>
	<footer>
		<p>@2017</p>
	</footer>
</h:body>
</html>